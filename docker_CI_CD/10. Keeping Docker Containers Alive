
0. exit immediately
docker run alpine
# Show that it exits immediately (docker ps -a)

# 1. Interactive Shell
docker run -it alpine sh
# show a container can stay alive interactively
# type "exit" to see container stops
# Show with "docker ps -a" the stopped container


# 2. tail -f /dev/null Trick
# tail -f /dev/null continuously reads from /dev/null, which never produces data. Since the command never exits, the containerâ€™s main process stays running.
docker run -d --name alpine-tail alpine tail -f /dev/null
docker ps
# exec into the container
docker exec -it alpine-tail sh


# 3. sleep infinity
docker run -d --name alpine-sleep alpine sleep infinity
docker ps
docker exec -it alpine-sleep sh

# 4. Infinite Loop
docker run -d --name alpine-loop alpine sh -c "while true; do sleep 60; done"
# Flexible: Can add tasks inside the loop
# Keeps CPU usage low with sleep 60

# 5. Timed Auto-Stop Container
docker run -d --name alpine-timed alpine sh -c "sleep 180"

# 6. Dockerfile
# Example 1
FROM alpine:latest
CMD ["tail", "-f", "/dev/null"]


# Example 2
FROM alpine:latest
CMD ["sh", "-c", "while true; do sleep 60; done"]

# Example 3
docker build -t alpine-tail-dockerfile .
docker run -d alpine-tail-dockerfile

# 7. run real services
docker run -d --name alpine-nginx alpine sh -c "apk add --no-cache nginx && nginx -g 'daemon off;'"

